<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis3.dao.mapper.StudentMapper">

	<!-- ################### resultMap ####################### -->
	 <resultMap  id="studentResultMap" 
	            type="com.mybatis3.domain.Student">
	 	     <result column="STUD_ID" property="studId"/>      
	 	     <result column="NAME" property="name"/>      
	 	     <result column="EMAIL" property="email"/>      
	 	     <result column="dob" property="dob"/>      
	 </resultMap>
			   
			   
    <!-- @@@@@@@@@@@@@@@@@@@@@@@@@ INSERT @@@@@@@@@@@@@@@@@@@@@@@@@ -->
    <insert id="insertStudent"  parameterType="com.mybatis3.domain.Student">
    	insert into students(stud_id,name,email,dob)
    	values (#{studId},#{name},#{email},#{dob}) 
    </insert>
    
    <insert id="insertStudentBySequence1"  parameterType="com.mybatis3.domain.Student">
    	insert into students(stud_id,name,email,dob)
    	values (STUDENTS_STUD_ID_SEQ.nextval,#{name},#{email},#{dob}) 
    </insert>
    
    <insert id="insertStudentBySequence2"  parameterType="com.mybatis3.domain.Student">
    <!-- 시퀀스 뽑을 때, pk 값을 밖에서 얻을 수 있음 -->
    	<selectKey order="BEFORE" keyProperty="studId" resultType="int">
    		select STUDENTS_STUD_ID_SEQ.nextval from dual
    	</selectKey>
    	insert into students(stud_id,name,email,dob)
    	values (#{studId},#{name},#{email},#{dob}) 
    </insert>
			   
    <!-- @@@@@@@@@@@@@@@@@@@@@@@@@ SELECT @@@@@@@@@@@@@@@@@@@@@@@@@ -->

 	<select id="findStudentByIdResultMap" 
 			parameterType="java.lang.Integer"
 			resultMap="studentResultMap">
 			select stud_id, name, email, dob 
			from students
			where stud_id= #{studId}
 	
 	</select>
	
	<!-- resultType Student(DTO) -->
	<select id="findStudentById" 
			parameterType="java.lang.Integer" 
			resultType="com.mybatis3.domain.Student">
		select stud_id, name, email, dob 
		from students
		where stud_id= #{studId}
	</select>
	
	
	<!-- resultType List<Student>  List<DTO> -->
	<select id="findAllStudents" 
			resultType="com.mybatis3.domain.Student">
		select stud_id as studId,name,email,dob
		from students
	</select>
</mapper>